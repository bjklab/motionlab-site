---
title: "Adverse Events"
site: distill::distill_website
#favicon: transparency.svg
---
  
### CT-CAE v5.0  
  
```{r ctcae5, eval=TRUE, warning=FALSE, message=FALSE, echo=FALSE, layout="l-body-outset"}

#' #################################
#' load libraries and set seed
#' #################################
library(tidyverse)
#library(readxl)
library(gt)
library(gtExtras)


#' #################################
#'  read and format meeting data
#' #################################

# readxl::read_excel("ctcae/CTCAE_v5_0.xlsx") %>%
#   identity() -> ctcae
# ctcae

# ctcae |> 
#   write_csv("ctcae/CTCAE_v5_0.csv")

read_csv("ctcae/CTCAE_v5_0.csv") %>%
  identity() -> ctcae
#ctcae

read_csv("ctcae/Form_Response_Report_CTCAE.csv") |> 
  count(TOXICITY1T) |> 
  rename(`CTCAE Term` = TOXICITY1T) |> 
  identity() -> observed_aes
#observed_aes

ctcae |> 
  left_join(observed_aes, by = "CTCAE Term") |> 
  replace_na(replace = list("n" = 0)) |> 
  #count(n)
  #rename(product = product_description) |> 
  #arrange(desc(order_date)) |> 
  gt(id = 'CTCAE v5.0') |> 
  gtExtras::gt_theme_538() |> 
  data_color(
        columns = n, # Column to base the color on
        target_columns = everything(), # Apply color to all columns in the row
        palette = c("white","purple") # Example palette
  ) |> 
  #gtExtras::gt_hulk_col_numeric(n) |> 
  gt::cols_hide(n) |> 
  gt::sub_missing() |> 
  gt::opt_interactive(
    use_filters = TRUE,
    use_compact_mode = TRUE,
    use_text_wrapping = TRUE
  )




```
  
<br>    
  
